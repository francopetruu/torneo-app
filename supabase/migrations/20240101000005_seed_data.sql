-- Seed data for testing
-- This migration inserts sample teams, players, matches, and other data

-- Insert teams
INSERT INTO teams (id, name, logo_url) VALUES
  ('00000000-0000-0000-0000-000000000001', 'Beach FC', 'https://example.com/logos/beach-fc.png'),
  ('00000000-0000-0000-0000-000000000002', 'Sand Sharks', 'https://example.com/logos/sand-sharks.png'),
  ('00000000-0000-0000-0000-000000000003', 'Wave Riders', 'https://example.com/logos/wave-riders.png'),
  ('00000000-0000-0000-0000-000000000004', 'Tide Breakers', 'https://example.com/logos/tide-breakers.png')
ON CONFLICT (id) DO NOTHING;

-- Insert players for Beach FC
INSERT INTO players (id, team_id, name, jersey_number, photo_url) VALUES
  ('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'John Doe', 1, NULL),
  ('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'Mike Smith', 7, NULL),
  ('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'Alex Johnson', 10, NULL),
  ('10000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'Chris Brown', 5, NULL),
  ('10000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', 'David Wilson', 9, NULL)
ON CONFLICT DO NOTHING;

-- Insert players for Sand Sharks
INSERT INTO players (id, team_id, name, jersey_number, photo_url) VALUES
  ('10000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000002', 'Tom Anderson', 1, NULL),
  ('10000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000002', 'Sam Taylor', 8, NULL),
  ('10000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000002', 'Ryan Martinez', 11, NULL),
  ('10000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000002', 'Luke Garcia', 6, NULL),
  ('10000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000002', 'Nick Rodriguez', 9, NULL)
ON CONFLICT DO NOTHING;

-- Insert players for Wave Riders
INSERT INTO players (id, team_id, name, jersey_number, photo_url) VALUES
  ('10000000-0000-0000-0000-000000000011', '00000000-0000-0000-0000-000000000003', 'James Lee', 1, NULL),
  ('10000000-0000-0000-0000-000000000012', '00000000-0000-0000-0000-000000000003', 'Ben White', 7, NULL),
  ('10000000-0000-0000-0000-000000000013', '00000000-0000-0000-0000-000000000003', 'Kevin Green', 10, NULL),
  ('10000000-0000-0000-0000-000000000014', '00000000-0000-0000-0000-000000000003', 'Paul Black', 4, NULL),
  ('10000000-0000-0000-0000-000000000015', '00000000-0000-0000-0000-000000000003', 'Mark Blue', 12, NULL)
ON CONFLICT DO NOTHING;

-- Insert players for Tide Breakers
INSERT INTO players (id, team_id, name, jersey_number, photo_url) VALUES
  ('10000000-0000-0000-0000-000000000016', '00000000-0000-0000-0000-000000000004', 'Steve King', 1, NULL),
  ('10000000-0000-0000-0000-000000000017', '00000000-0000-0000-0000-000000000004', 'Rob Queen', 9, NULL),
  ('10000000-0000-0000-0000-000000000018', '00000000-0000-0000-0000-000000000004', 'Dan Knight', 11, NULL),
  ('10000000-0000-0000-0000-000000000019', '00000000-0000-0000-0000-000000000004', 'Tim Bishop', 3, NULL),
  ('10000000-0000-0000-0000-000000000020', '00000000-0000-0000-0000-000000000004', 'Phil Rook', 8, NULL)
ON CONFLICT DO NOTHING;

-- Insert matches
INSERT INTO matches (id, home_team_id, away_team_id, home_score, away_score, match_date, status, venue) VALUES
  ('20000000-0000-0000-0000-000000000001', 
   '00000000-0000-0000-0000-000000000001', 
   '00000000-0000-0000-0000-000000000002', 
   3, 1, 
   NOW() - INTERVAL '7 days', 
   'finished', 
   'Beach Stadium 1'),
  ('20000000-0000-0000-0000-000000000002', 
   '00000000-0000-0000-0000-000000000003', 
   '00000000-0000-0000-0000-000000000004', 
   2, 2, 
   NOW() - INTERVAL '6 days', 
   'finished', 
   'Beach Stadium 2'),
  ('20000000-0000-0000-0000-000000000003', 
   '00000000-0000-0000-0000-000000000001', 
   '00000000-0000-0000-0000-000000000003', 
   1, 0, 
   NOW() - INTERVAL '4 days', 
   'finished', 
   'Beach Stadium 1'),
  ('20000000-0000-0000-0000-000000000004', 
   '00000000-0000-0000-0000-000000000002', 
   '00000000-0000-0000-0000-000000000004', 
   4, 2, 
   NOW() - INTERVAL '3 days', 
   'finished', 
   'Beach Stadium 2'),
  ('20000000-0000-0000-0000-000000000005', 
   '00000000-0000-0000-0000-000000000001', 
   '00000000-0000-0000-0000-000000000004', 
   0, 0, 
   NOW() + INTERVAL '2 days', 
   'scheduled', 
   'Beach Stadium 1'),
  ('20000000-0000-0000-0000-000000000006', 
   '00000000-0000-0000-0000-000000000002', 
   '00000000-0000-0000-0000-000000000003', 
   0, 0, 
   NOW() + INTERVAL '3 days', 
   'scheduled', 
   'Beach Stadium 2')
ON CONFLICT (id) DO NOTHING;

-- Insert match events (goals, cards)
-- Match 1: Beach FC 3-1 Sand Sharks
INSERT INTO match_events (id, match_id, player_id, event_type, minute) VALUES
  ('30000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000003', 'goal', 15),
  ('30000000-0000-0000-0000-000000000002', '20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000005', 'goal', 28),
  ('30000000-0000-0000-0000-000000000003', '20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000008', 'goal', 35),
  ('30000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000002', 'goal', 67),
  ('30000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000007', 'yellow_card', 42)
ON CONFLICT (id) DO NOTHING;

-- Match 2: Wave Riders 2-2 Tide Breakers
INSERT INTO match_events (id, match_id, player_id, event_type, minute) VALUES
  ('30000000-0000-0000-0000-000000000006', '20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000013', 'goal', 12),
  ('30000000-0000-0000-0000-000000000007', '20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000017', 'goal', 25),
  ('30000000-0000-0000-0000-000000000008', '20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000015', 'goal', 58),
  ('30000000-0000-0000-0000-000000000009', '20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000018', 'goal', 72),
  ('30000000-0000-0000-0000-000000000010', '20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000014', 'yellow_card', 33)
ON CONFLICT (id) DO NOTHING;

-- Match 3: Beach FC 1-0 Wave Riders
INSERT INTO match_events (id, match_id, player_id, event_type, minute) VALUES
  ('30000000-0000-0000-0000-000000000011', '20000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000002', 'goal', 45),
  ('30000000-0000-0000-0000-000000000012', '20000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000012', 'yellow_card', 60)
ON CONFLICT (id) DO NOTHING;

-- Match 4: Sand Sharks 4-2 Tide Breakers
INSERT INTO match_events (id, match_id, player_id, event_type, minute) VALUES
  ('30000000-0000-0000-0000-000000000013', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000010', 'goal', 8),
  ('30000000-0000-0000-0000-000000000014', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000007', 'goal', 22),
  ('30000000-0000-0000-0000-000000000015', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000017', 'goal', 31),
  ('30000000-0000-0000-0000-000000000016', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000008', 'goal', 44),
  ('30000000-0000-0000-0000-000000000017', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000010', 'goal', 56),
  ('30000000-0000-0000-0000-000000000018', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000018', 'goal', 78),
  ('30000000-0000-0000-0000-000000000019', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000009', 'yellow_card', 50),
  ('30000000-0000-0000-0000-000000000020', '20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000019', 'red_card', 65)
ON CONFLICT (id) DO NOTHING;

-- Insert banners
INSERT INTO banners (id, title, description, image_url, active, display_order) VALUES
  ('40000000-0000-0000-0000-000000000001', 
   'Tournament Starts Soon!', 
   'The beach football tournament kicks off next week. Get ready for exciting matches!', 
   'https://example.com/banners/tournament-start.jpg', 
   true, 
   1),
  ('40000000-0000-0000-0000-000000000002', 
   'Match Schedule Released', 
   'Check out the complete match schedule for all teams.', 
   NULL, 
   true, 
   2),
  ('40000000-0000-0000-0000-000000000003', 
   'Old Announcement', 
   'This banner is inactive.', 
   NULL, 
   false, 
   3)
ON CONFLICT (id) DO NOTHING;

-- Initialize team statistics (triggers will calculate these automatically, but we can also initialize them)
-- The triggers will recalculate when matches are inserted, but let's initialize for all teams
DO $$
DECLARE
  team_record RECORD;
BEGIN
  FOR team_record IN SELECT id FROM teams LOOP
    PERFORM initialize_team_statistics(team_record.id);
    PERFORM recalculate_team_statistics(team_record.id);
  END LOOP;
END $$;





